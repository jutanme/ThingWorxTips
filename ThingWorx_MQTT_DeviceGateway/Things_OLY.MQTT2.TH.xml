<?xml version="1.0" encoding="UTF-8" standalone="no"?><Entities build="b112" majorVersion="9" minorVersion="2" modelPersistenceProviderPackage="PostgresPersistenceProviderPackage" revision="1" schemaVersion="1120" universal=""><Things><Thing description="" documentationContent="" effectiveThingPackage="MQTTThing" enabled="true" homeMashup="" identifier="" inheritedValueStream="" lastModifiedDate="2022-07-08T04:45:49.751Z" name="OLY.MQTT2.TH" projectName="OLY.POC" published="false" tags="" thingTemplate="MQTT" valueStream=""><Owner name="Administrator" type="User"/><avatar/><DesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></DesignTimePermissions><RunTimePermissions/><VisibilityPermissions><Visibility/></VisibilityPermissions><ConfigurationTableDefinitions/><ConfigurationTables><ConfigurationTable dataShapeName="" description="Automapping Settings" isMultiRow="false" name="Automapping" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition aspect.defaultValue="false" baseType="BOOLEAN" description="Enable auto mapping" name="enabled" ordinal="0"/><FieldDefinition aspect.defaultValue="/Thingworx/{s}/{t}/{p}" baseType="STRING" description="Topic format (including {s} (server) {t} (thing) and {p} (property) tokens)" name="format" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><enabled>false</enabled><format><![CDATA[/Thingworx/{s}/{t}/{p}]]></format></Row></Rows></ConfigurationTable><ConfigurationTable dataShapeName="" description="Connection Settings" isMultiRow="false" name="ConnectionInfo" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition aspect.defaultValue="/Thingworx/{s}/{t}" baseType="STRING" description="MQTT client id format (including {s} and {t} tokens)" name="clientIdFormat" ordinal="0"/><FieldDefinition aspect.defaultValue="60000.0" baseType="NUMBER" description="Timeout (milliseconds) to wait for any activity in the connection. +  This should be greater than pingInterval. Set 0 for no timeout" name="connectionIdleTimeout" ordinal="11"/><FieldDefinition aspect.defaultValue="10000.0" baseType="NUMBER" description="Timeout (milliseconds) to connect" name="connectTimeout" ordinal="7"/><FieldDefinition baseType="PASSWORD" description="MQTT password" name="password" ordinal="5"/><FieldDefinition aspect.defaultValue="45000.0" baseType="NUMBER" description="Interval (milliseconds) to check if the connection is active. This value should be less than connectionIdelTimeout" name="pingInterval" ordinal="10"/><FieldDefinition aspect.defaultValue="0" baseType="INTEGER" description="Desired QoS" name="qos" ordinal="12"/><FieldDefinition aspect.defaultValue="-1.0" baseType="NUMBER" description="Number of attempts to retry to connect once the connection is lost. -1 for indefinite attempts" name="retryAttempts" ordinal="9"/><FieldDefinition aspect.defaultValue="30000.0" baseType="NUMBER" description="Timeout (milliseconds) to retry a connection" name="retryInterval" ordinal="8"/><FieldDefinition baseType="STRING" description="MQTT Server name" name="serverName" ordinal="2"/><FieldDefinition aspect.defaultValue="1883.0" baseType="NUMBER" description="MQTT Server port" name="serverPort" ordinal="3"/><FieldDefinition aspect.defaultValue="5000.0" baseType="NUMBER" description="Timeout (milliseconds) to execute a request" name="timeout" ordinal="6"/><FieldDefinition baseType="STRING" description="MQTT user id" name="userId" ordinal="4"/><FieldDefinition aspect.defaultValue="false" baseType="BOOLEAN" description="Use SSL connection" name="useSSL" ordinal="1"/></FieldDefinitions></DataShape><Rows><Row><clientIdFormat><![CDATA[/Thingworx/{s}/{t}]]></clientIdFormat><connectTimeout>10000.0</connectTimeout><connectionIdleTimeout>60000.0</connectionIdleTimeout><password><![CDATA[yhscd551nT8YGNV7phypMA==:SXpYHxLAF4LQbUmOdhqwVQ==]]></password><pingInterval>45000.0</pingInterval><qos>0</qos><retryAttempts>-1.0</retryAttempts><retryInterval>30000.0</retryInterval><serverName><![CDATA[192.168.253.250]]></serverName><serverPort>1883.0</serverPort><timeout>5000.0</timeout><useSSL>false</useSSL><userId><![CDATA[ptcuser]]></userId></Row></Rows></ConfigurationTable><ConfigurationTable dataShapeName="" description="Property to MQTT topic mappings" isMultiRow="true" name="Mappings" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition baseType="STRING" description="Alias name" name="name" ordinal="0"/><FieldDefinition baseType="BOOLEAN" description="Publish changes" name="publish" ordinal="0"/><FieldDefinition baseType="BOOLEAN" description="Subscribe to changes" name="subscribe" ordinal="0"/><FieldDefinition baseType="STRING" description="MQTT Topic ID" name="topic" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><name><![CDATA[test]]></name><publish>true</publish><subscribe>true</subscribe><topic><![CDATA[sample2]]></topic></Row></Rows></ConfigurationTable></ConfigurationTables><ThingShape><PropertyDefinitions><PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isPersistent="true" baseType="STRING" category="" description="" isLocalOnly="false" name="test" ordinal="2"/></PropertyDefinitions><ServiceDefinitions><ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="changeSchedule"><ResultType baseType="NOTHING" description="" name="result" ordinal="0"/><ParameterDefinitions/></ServiceDefinition></ServiceDefinitions><EventDefinitions/><ServiceMappings/><ServiceImplementations><ServiceImplementation description="" handlerName="Script" name="changeSchedule"><ConfigurationTables><ConfigurationTable dataShapeName="" description="" isMultiRow="false" name="Script" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><code><![CDATA[var sch = Things["MHI.GT.BOM02.ReleaseScheduler.SC"];

var params = {
  tableName: "Settings" /* STRING */
};

var ext = sch.GetConfigurationTable(params);
var x = ext.getRow(0);
x.SetStringValue("schedule", "0 0 22 * * ? *");
x.SetBooleanValue("enabled", true);
x.SetStringValue("runAsUser", "Administrator");

var paramsSet = {
  configurationTable: ext /* INFOTABLE */,
  persistent: true /* BOOLEAN */,
  tableName: "Settings" /* STRING */
};

// no return
sch.SetConfigurationTable(paramsSet);
sch.EnableThing();
logger.info("Controllo configurazione restart LightSwitchOn");

sch.RestartThing();]]></code></Row></Rows></ConfigurationTable></ConfigurationTables></ServiceImplementation></ServiceImplementations><Subscriptions/></ThingShape><PropertyBindings/><RemotePropertyBindings/><RemoteServiceBindings/><RemoteEventBindings/><AlertConfigurations><AlertDefinitions name="test"/></AlertConfigurations><ImplementedShapes/><ThingProperties><lastConnection><Value>2022-07-08T04:45:50.485Z</Value><Timestamp>2022-07-08T04:45:50.485Z</Timestamp><Quality>GOOD</Quality></lastConnection><test><Value><![CDATA[123456]]></Value><Timestamp>2022-07-08T05:19:55.579Z</Timestamp><Quality>GOOD</Quality></test></ThingProperties><ConfigurationChanges><ConfigurationChange changeAction="CREATE" changeReason="header : name : updated&#10;" timestamp="2022-07-06T12:22:37.624Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="configuration : serverPort : updated, serverName : updated&#10;" timestamp="2022-07-06T12:23:06.781Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="configuration : serverName : updated&#10;" timestamp="2022-07-06T12:24:42.140Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="configuration : Mappings : updated&#10;" timestamp="2022-07-06T13:30:43.488Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="configuration : serverName : updated&#10;" timestamp="2022-07-07T05:46:33.072Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="configuration : serverName : updated&#10;" timestamp="2022-07-07T05:46:59.510Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="configuration : serverPort : updated&#10;" timestamp="2022-07-08T04:39:40.454Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="properties : test : updated&#10;" timestamp="2022-07-08T04:45:49.453Z" user="Administrator"/></ConfigurationChanges></Thing></Things></Entities>