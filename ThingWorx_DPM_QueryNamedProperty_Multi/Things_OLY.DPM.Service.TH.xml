<?xml version="1.0" encoding="UTF-8" standalone="no"?><Entities build="b1190" majorVersion="9" minorVersion="3" modelPersistenceProviderPackage="MssqlPersistenceProviderPackage" revision="4" schemaVersion="1134" universal=""><Things><Thing description="" documentationContent="" effectiveThingPackage="ConfiguredThing" enabled="true" homeMashup="" identifier="" inheritedValueStream="" lastModifiedDate="2022-12-28T08:21:39.355Z" name="OLY.DPM.Service.TH" projectName="OLY.DPM" published="false" tags="" thingTemplate="GenericThing" valueStream=""><Owner name="Administrator" type="User"/><avatar/><DesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></DesignTimePermissions><RunTimePermissions/><VisibilityPermissions><Visibility/></VisibilityPermissions><ConfigurationTableDefinitions/><ConfigurationTables/><ThingShape><PropertyDefinitions><PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.defaultValue="{&quot;SE.CellFab.Model.Workunit.ORD-StackingRobot-02&quot;:&quot;Coil0.Coil0.TH&quot;,&quot;SE.CellFab.Model.Workunit.BOS-StackingRobot-02&quot;:&quot;Coil2.Coil2.TH&quot;,&quot;SE.CellFab.Model.Workunit.BOS-StackingRobot-01&quot;:&quot;Coil1.Coil1.TH&quot;,&quot;SE.CellFab.Model.Workunit.ORD-StackingRobot-01&quot;:&quot;Coil3.Coil3.TH&quot;}" aspect.isIndexed="false" aspect.isPersistent="false" baseType="JSON" category="" description="" isLocalOnly="false" name="HelperThingJson" ordinal="2"/></PropertyDefinitions><ServiceDefinitions><ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="GetDPMHeplerVS"><ResultType baseType="INFOTABLE" description="" name="result" ordinal="0"/><ParameterDefinitions><FieldDefinition baseType="DATETIME" description="" name="end" ordinal="3"/><FieldDefinition baseType="DATETIME" description="" name="start" ordinal="2"/><FieldDefinition baseType="STRING" description="" name="thingName" ordinal="1"/></ParameterDefinitions></ServiceDefinition><ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="GetDPMValueStream"><ResultType baseType="INFOTABLE" description="" name="result" ordinal="0"/><ParameterDefinitions><FieldDefinition baseType="DATETIME" description="" name="end" ordinal="3"/><FieldDefinition baseType="DATETIME" description="" name="start" ordinal="2"/><FieldDefinition baseType="STRING" description="" name="thingName" ordinal="1"/></ParameterDefinitions></ServiceDefinition><ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="GetEndToday"><ResultType baseType="DATETIME" description="" name="result" ordinal="0"/><ParameterDefinitions/></ServiceDefinition></ServiceDefinitions><EventDefinitions/><ServiceMappings/><ServiceImplementations><ServiceImplementation description="" handlerName="Script" name="GetDPMHeplerVS"><ConfigurationTables><ConfigurationTable dataShapeName="" description="" isMultiRow="false" name="Script" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><code><![CDATA[if (thingName && start && end) {
    var helper = me.HelperThingJson[thingName];
    if (helper) {
        // result: INFOTABLE dataShape: ""
        var result = Things[helper].QueryPropertyHistory({
            oldestFirst: undefined /* BOOLEAN */,
            maxItems: undefined /* NUMBER {"defaultValue":500} */,
            endDate: end /* DATETIME */,
            query: undefined /* QUERY */,
            fillOption: undefined /* STRING {"defaultValue":"Previous"} */,
            startDate: start /* DATETIME */
        });
        //logger.warn(result.ToJSON());
    }    
}]]></code></Row></Rows></ConfigurationTable></ConfigurationTables></ServiceImplementation><ServiceImplementation description="" handlerName="Script" name="GetDPMValueStream"><ConfigurationTables><ConfigurationTable dataShapeName="" description="" isMultiRow="false" name="Script" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><code><![CDATA[if (thingName && start && end) {
    // VauleStreamのプロパティ取得
    var properties = me.GetPropertyDefinitions({
    	category: undefined /* STRING */,
    	type: undefined /* BASETYPENAME */,
    	dataShape: undefined /* DATASHAPENAME */
    });
    properties.RemoveAllRows();
    properties.AddRow({"name" : "PTCAvailabilityEventFaultCode"});
    properties.AddRow({"name" : "PTCMaterialMasterID"});
    properties.AddRow({"name" : "PTCProductionCount"});
    properties.AddRow({"name" : "PTCTargetQuantity"});
    // result: INFOTABLE dataShape: ""
    var result = Things[thingName].QueryNamedPropertyHistory({
    	oldestFirst: undefined /* BOOLEAN */,
    	maxItems: undefined /* NUMBER {"defaultValue":500} */,
    	endDate: end /* DATETIME */,
    	propertyNames: properties /* INFOTABLE {"dataShape":"EntityList"} */,
    	query: undefined /* QUERY */,
    	fillOption: undefined /* STRING {"defaultValue":"Previous"} */,
    	startDate: start /* DATETIME */
    });
}]]></code></Row></Rows></ConfigurationTable></ConfigurationTables></ServiceImplementation><ServiceImplementation description="" handlerName="Script" name="GetEndToday"><ConfigurationTables><ConfigurationTable dataShapeName="" description="" isMultiRow="false" name="Script" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><code><![CDATA[// dateValue:DATETIME
let dateValue = new Date();

// dateAddDays(dateValue:DATETIME, amount:NUMBER):STRING
let result = dateAddDays(dateValue, 1);]]></code></Row></Rows></ConfigurationTable></ConfigurationTables></ServiceImplementation></ServiceImplementations><Subscriptions/></ThingShape><PropertyBindings/><RemotePropertyBindings/><RemoteServiceBindings/><RemoteEventBindings/><AlertConfigurations><AlertDefinitions name="HelperThingJson"/></AlertConfigurations><ImplementedShapes/><ThingProperties/><ConfigurationChanges><ConfigurationChange changeAction="CREATE" changeReason="header : name : updated, projectName : updated&#10;" timestamp="2022-12-28T07:46:03.284Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetDPMHeplerVS : service added&#10;" timestamp="2022-12-28T07:47:48.335Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetDPMHeplerVS : service updated&#10;GetDPMValueStream : service added, output updated&#10;" timestamp="2022-12-28T07:48:59.837Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetDPMValueStream : service updated&#10;GetEndToday : service added&#10;" timestamp="2022-12-28T07:49:51.163Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetEndToday : service updated&#10;" timestamp="2022-12-28T07:50:16.818Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetDPMValueStream : output updated&#10;" timestamp="2022-12-28T07:56:11.392Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetDPMValueStream : service updated&#10;" timestamp="2022-12-28T08:02:08.822Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetDPMValueStream : service updated&#10;" timestamp="2022-12-28T08:03:50.617Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetDPMValueStream : service updated&#10;" timestamp="2022-12-28T08:06:33.438Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetEndToday : output updated&#10;" timestamp="2022-12-28T08:12:51.994Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetEndToday : service updated&#10;" timestamp="2022-12-28T08:14:19.167Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetDPMValueStream : service updated&#10;" timestamp="2022-12-28T08:18:06.551Z" user="Administrator"/><ConfigurationChange changeAction="FORCEEDIT" changeReason="ForceEdit" timestamp="2022-12-28T08:18:12.523Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="properties : HelperThingJson : added&#10;" timestamp="2022-12-28T08:21:20.747Z" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : GetDPMHeplerVS : service updated&#10;" timestamp="2022-12-28T08:21:39.354Z" user="Administrator"/></ConfigurationChanges></Thing></Things></Entities>